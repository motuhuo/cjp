<!DOCTYPE html >
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<style type="text/css">
  div {width:100px; height:100px; background:red; position:absolute;}
</style>
<script type="text/javascript">
  window.onload=function ()
  {	
     var oDiv=document.getElementById('div1');
	 var disx=0;
	 var disy=0;
	 document.onmousedown=function (ev)
	 {	
	   var oEvent=ev||event;
	   disx=oEvent.clientX-oDiv.offsetLeft;
	   disy=oEvent.clientY-oDiv.offsetTop;
	   document.onmousemove=function (ev)
	   {	
	     var oEvent=ev||event;
		 var l=oEvent.clientX-disx;
		 var t=oEvent.clientY-disy;
		 if (l<0)
			 {
				 l=0;
			 }
		 else if (l>document.documentElement.clientWidth-oDiv.offsetWidth)
			 {
				 l=document.documentElement.clientWidth-oDiv.offsetWidth;
			 }
		 if (t<0)
			 {
				 t=0;
			 }
		 else if (t>document.documentElement.clientHeight-oDiv.offsetHeight)
			 {
				 t=document.documentElement.clientHeight-oDiv.offsetHeight;
			 }
		 oDiv.style.left=l+'px';
		 oDiv.style.top=t+'px';
	   };
	    document.onmouseup=function ()
		 {	
			 document.onmousemove=null;
			 document.onmouseup=null;
		 };
	 return false;
	 };
	
  }
</script>
</head>

<body>
<div id="div1"></div>
</body>
</html>
